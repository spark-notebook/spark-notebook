# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Home page
GET            /                                         controllers.Application.dash(path:String="/")
GET            /tree                                     controllers.Application.dash(path:String="/")
GET            /tree/                                    controllers.Application.dash(path:String="/")
GET            /tree/*path                               controllers.Application.dash(path:String)

GET            /api/config/tree                          controllers.Application.configTree()
GET            /api/config/common                        controllers.Application.configCommon()
GET            /api/config/notebook                      controllers.Application.configNotebook()
GET            /api/kernelspecs                          controllers.Application.kernelSpecs()

DELETE         /api/sessions/:kernelId                   controllers.Application.terminateKernel(kernelId:String)
POST           /api/sessions                             controllers.Application.createSession()
GET            /api/sessions                             controllers.Application.sessions()
GET            /api/sessions/path/*path                  controllers.Application.getSession(path:String)

POST           /api/kernels/:kernelId/interrupt          controllers.Application.terminateKernel(kernelId:String)
POST           /api/kernels/:kernelId/restart            controllers.Application.restartKernel(kernelId:String)

# Sbt project generation
POST           /adastyx/*path/generate_nb_project        controllers.GeneratedSbtProjects.generateNbProject(path:String)
GET            /projects                                 controllers.GeneratedSbtProjects.projects()
GET            /projects/:name/job                       controllers.GeneratedSbtProjects.projectInfo(name:String, from:Int)
GET            /projects/:name/zip/:filename             controllers.GeneratedSbtProjects.downloadFile(name:String, filename:String)

#Classic
GET            /api/contents                             controllers.Application.contents(type:String, path:String="/")
GET            /api/contents/                            controllers.Application.contents(type:String, path:String="/")
GET            /api/contents/*snb/checkpoints            controllers.Application.listCheckpoints(snb:String)
POST           /api/contents/*snb/checkpoints            controllers.Application.saveCheckpoint(snb:String)
POST           /api/contents/*snb/checkpoints/:id        controllers.Application.restoreCheckpoint(snb:String, id:String)
POST           /api/contents                             controllers.Application.newContent(path:String="/")
POST           /api/contents/                            controllers.Application.newContent(path:String="/")
GET            /api/contents/*path                       controllers.Application.contents(type:String, path:String)
POST           /api/contents/*path                       controllers.Application.newContent(path:String)
PATCH          /api/contents/*path                       controllers.Application.renameNotebook(path:String)
PUT            /api/contents/*path                       controllers.Application.saveNotebook(path:String)
DELETE         /api/contents/*path                       controllers.Application.deletePath(path:String)

# The presentation parameter is optional. E.g. /notebooks/abc.snb?presentation=report
GET            /notebooks/$snb<.+\.snb>                  controllers.Application.openNotebook(snb:String, presentation: Option[String], read_only: Option[Int])
GET            /notebooks/$snb<.+\.snb.ipynb>            controllers.Application.openNotebook(snb:String, presentation: Option[String], read_only: Option[Int])
GET            /edit/:snb                                controllers.Application.openNotebook(snb:String, presentation: Option[String], read_only: Option[Int])
GET            /notebooks/                               controllers.Application.dash(path:String="/")
GET            /notebooks/*path                          controllers.Application.dash(path:String)

GET            /files/*path                              controllers.Application.dlNotebookAs(path:String, format:String="json")
GET            /nbconvert/:format/*path                  controllers.Application.dlNotebookAs(path:String, format:String)

GET            /clusters                                 controllers.Application.clusters()
POST           /clusters                                 controllers.Application.addCluster()
DELETE         /clusters/:name                           controllers.Application.deleteCluster(name:String)

GET            /profiles                                 controllers.Application.profiles()


OPTIONS        /dockers                                  controllers.Application.dockerAvailable()
GET            /dockers                                  controllers.Application.dockerList()


# Pac4j Authentication
GET           /loginForm                        controllers.Application.loginForm()
GET           /callback                         @org.pac4j.play.CallbackController.callback()
POST          /callback                         @org.pac4j.play.CallbackController.callback()
GET           /logout                           @org.pac4j.play.LogoutController.logout()


# Web Sockets
GET            /ws/observable/:contextId                 controllers.Application.openObservable(contextId:String)
GET            /ws/api/kernels/:kernelId/channels        controllers.Application.openKernel(kernelId:String,session_id:String)


# Map static resources from the /public folder to the /assets URL path
GET            /assets/*file                             controllers.Assets.at(path="/public", file)